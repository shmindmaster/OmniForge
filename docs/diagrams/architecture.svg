<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1600" height="900" viewBox="0 0 1600 900">
  <rect width="1600" height="900" fill="#ffffff"/>

  <!-- Title -->
  <text x="800" y="50" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="22" font-weight="bold" fill="#2c3e50">im2fit — System Architecture</text>
  <text x="800" y="80" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="14" fill="#7f8c8d">Upload → Segmentation → Scale (mm) → Metrics/Overlay/STL → Azure Blob</text>

  <!-- Client -->
  <rect x="60" y="180" width="220" height="110" fill="#ffffff" stroke="#2c3e50" stroke-width="2" rx="10" ry="10"/>
  <text x="170" y="215" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="20" font-weight="bold" fill="#2c3e50">Client</text>
  <text x="170" y="240" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="16" fill="#2c3e50">Web UI / Swagger</text>

  <!-- FastAPI App Service group -->
  <rect x="340" y="120" width="520" height="360" fill="#ecf0f1" stroke="#bdc3c7" stroke-width="2" stroke-dasharray="6 6"/>
  <text x="600" y="145" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="14" fill="#7f8c8d">Azure App Service (Container)</text>

  <!-- FastAPI -->
  <rect x="370" y="180" width="220" height="110" fill="#ffffff" stroke="#2c3e50" stroke-width="2" rx="10" ry="10"/>
  <text x="480" y="215" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="20" font-weight="bold" fill="#2c3e50">FastAPI</text>
  <text x="480" y="240" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="16" fill="#2c3e50">/process, /version, /health</text>

  <!-- Segmentation -->
  <rect x="640" y="180" width="200" height="110" fill="#ffffff" stroke="#2c3e50" stroke-width="2" rx="10" ry="10"/>
  <text x="740" y="210" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="20" font-weight="bold" fill="#2c3e50">Segmentation</text>
  <text x="740" y="235" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="16" fill="#2c3e50">ONNX (YOLOv11)</text>
  <text x="740" y="257" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="14" fill="#7f8c8d">or Hosted (Roboflow)</text>

  <!-- Scaling -->
  <rect x="370" y="300" width="220" height="110" fill="#ffffff" stroke="#2c3e50" stroke-width="2" rx="10" ry="10"/>
  <text x="480" y="335" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="20" font-weight="bold" fill="#2c3e50">Scaling</text>
  <text x="480" y="360" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="16" fill="#2c3e50">ArUco 20 mm → mm/px</text>

  <!-- Metrics & Artifacts -->
  <rect x="640" y="300" width="200" height="110" fill="#ffffff" stroke="#2c3e50" stroke-width="2" rx="10" ry="10"/>
  <text x="740" y="330" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="20" font-weight="bold" fill="#2c3e50">Metrics &amp; Artifacts</text>
  <text x="740" y="355" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="16" fill="#2c3e50">Overlay PNG, CSV, STL</text>

  <!-- Blob Storage Group -->
  <rect x="960" y="160" width="260" height="320" fill="#ecf0f1" stroke="#bdc3c7" stroke-width="2" stroke-dasharray="6 6"/>
  <text x="1090" y="185" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="14" fill="#7f8c8d">Azure Storage</text>

  <!-- Blob Container -->
  <rect x="990" y="220" width="200" height="110" fill="#ffffff" stroke="#2c3e50" stroke-width="2" rx="10" ry="10"/>
  <text x="1090" y="255" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="20" font-weight="bold" fill="#2c3e50">Blob Container</text>
  <text x="1090" y="280" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="16" fill="#2c3e50">Artifacts (public/private)</text>

  <!-- Delivery -->
  <rect x="990" y="340" width="200" height="110" fill="#ffffff" stroke="#2c3e50" stroke-width="2" rx="10" ry="10"/>
  <text x="1090" y="373" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="20" font-weight="bold" fill="#2c3e50">Delivery</text>
  <text x="1090" y="397" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="16" fill="#2c3e50">Direct URLs / Proxy</text>
  <text x="1090" y="418" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="14" fill="#7f8c8d">SAS (signed) recommended</text>

  <!-- Optional Proxy -->
  <rect x="1260" y="300" width="260" height="130" fill="#ecf0f1" stroke="#bdc3c7" stroke-width="2" stroke-dasharray="6 6"/>
  <text x="1390" y="325" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="14" fill="#7f8c8d">Optional</text>
  <rect x="1290" y="340" width="200" height="70" fill="#ffffff" stroke="#2c3e50" stroke-width="2" rx="10" ry="10"/>
  <text x="1390" y="372" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="20" font-weight="bold" fill="#2c3e50">/artifact/{name}</text>
  <text x="1390" y="394" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="14" fill="#7f8c8d">PUBLIC_ARTIFACT_PROXY=1</text>

  <!-- Flows (simple lines) -->
  <line x1="280" y1="235" x2="370" y2="235" stroke="#3498db" stroke-width="3"/>
  <line x1="590" y1="235" x2="640" y2="235" stroke="#3498db" stroke-width="3"/>
  <line x1="740" y1="290" x2="740" y2="300" stroke="#3498db" stroke-width="3"/>
  <line x1="480" y1="290" x2="480" y2="300" stroke="#3498db" stroke-width="3"/>
  <line x1="840" y1="355" x2="990" y2="275" stroke="#3498db" stroke-width="3"/>
  <line x1="840" y1="355" x2="990" y2="395" stroke="#3498db" stroke-width="3"/>
  <line x1="1190" y1="375" x2="1290" y2="375" stroke="#3498db" stroke-width="3"/>
  <line x1="1190" y1="275" x2="1290" y2="375" stroke="#3498db" stroke-width="3"/>

  <!-- Note -->
  <text x="800" y="820" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="14" fill="#7f8c8d">Managed Identity + RBAC recommended for Storage; connection string supported for demos.</text>
</svg>
